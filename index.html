<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>오늘의 명언</title>
  <style>
    :root { --radius:20px }
    body { margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#111; color:#eaeaea; }
    .card {
      max-width:720px; margin:24px auto; padding:28px;
      border-radius:var(--radius); background:rgba(255,255,255,0.06);
      box-shadow:0 8px 32px rgba(0,0,0,0.35); backdrop-filter: blur(6px);
      border:1px solid rgba(255,255,255,0.08);
    }
    .title { font-weight:700; font-size:18px; margin-bottom:12px; text-align:center }
    .quote { font-size:20px; line-height:1.6; text-align:center; margin:12px 0 4px }
    .author { text-align:center; opacity:.85; margin-bottom:18px }
    .profile { text-align:center; opacity:.6; margin-top:-8px; margin-bottom:18px }
    .row { display:flex; gap:10px; justify-content:center }
    button {
      border:0; padding:10px 16px; border-radius:12px; cursor:pointer;
      background:#2c6cff; color:white; font-weight:600;
      box-shadow:0 6px 16px rgba(44,108,255,.35);
    }
    button:disabled { opacity:.6; cursor:wait }
    .tiny { text-align:center; font-size:12px; opacity:.55; margin-top:12px }
  </style>
</head>
<body>
  <div class="card">
    <div class="title">오늘의 명언</div>
    <div id="quote" class="quote">버튼을 눌러 명언을 가져오세요.</div>
    <div id="author" class="author"></div>
    <div id="profile" class="profile"></div>
    <div class="row">
      <button id="btn">오늘의 명언</button>
    </div>
    <div class="tiny">출처: Korean Advice Open API</div>
  </div>

  <script>
    async function fetchAdvice() {
      const btn = document.getElementById('btn');
      btn.disabled = true;
      try {
        const res = await fetch('https://korean-advice-open-api.vercel.app/api/advice', { cache:'no-store' });
        const data = await res.json();
        document.getElementById('quote').textContent = data.message || '문구를 불러오지 못했어요.';
        document.getElementById('author').textContent = data.author ? `— ${data.author}` : '';
        document.getElementById('profile').textContent = data.authorProfile || '';
      } catch (e) {
        document.getElementById('quote').textContent = '네트워크 오류가 발생했어요.';
        document.getElementById('author').textContent = '';
        document.getElementById('profile').textContent = '';
      } finally {
        btn.disabled = false;
      }
    }
    document.getElementById('btn').addEventListener('click', fetchAdvice);
    // 페이지 열리면 자동 1회 불러오고 싶다면 아래 줄 주석 해제:
    // fetchAdvice();
  </script>
</body>
</html>
